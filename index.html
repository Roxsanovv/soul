<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soul Messenger</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
</head>
<body>
    <!-- –≠–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="logo">
                <span class="logo-icon">üí´</span>
                Soul
            </div>
            <div class="loading-spinner"></div>
            <p>–ó–∞–≥—Ä—É–∑–∫–∞...</p>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –≤—Ö–æ–¥–∞/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
    <div id="auth-screen" class="auth-screen hidden">
        <div class="auth-container">
            <div class="logo">
                <span class="logo-icon">üí´</span>
                Soul
            </div>
            <p class="tagline">–ù–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å –æ–±—â–µ–Ω–∏—è</p>
            
            <div class="auth-form">
                <div id="login-form">
                    <h2>–í—Ö–æ–¥</h2>
                    <div class="input-group">
                        <input type="email" id="login-email" placeholder=" " required>
                        <label for="login-email">Email</label>
                    </div>
                    <div class="input-group">
                        <input type="password" id="login-password" placeholder=" " required>
                        <label for="login-password">–ü–∞—Ä–æ–ª—å</label>
                    </div>
                    <button id="login-btn" class="btn-primary">
                        <span class="btn-text">–í–æ–π—Ç–∏</span>
                        <div class="btn-loader hidden"></div>
                    </button>
                    <p class="auth-switch">–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <span id="show-register">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</span></p>
                </div>
                
                <div id="register-form" class="hidden">
                    <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
                    <div class="input-group">
                        <input type="text" id="register-name" placeholder=" " required>
                        <label for="register-name">–ò–º—è</label>
                    </div>
                    <div class="input-group">
                        <input type="email" id="register-email" placeholder=" " required>
                        <label for="register-email">Email</label>
                    </div>
                    <div class="input-group">
                        <input type="password" id="register-password" placeholder=" " required minlength="6">
                        <label for="register-password">–ü–∞—Ä–æ–ª—å (–º–∏–Ω. 6 —Å–∏–º–≤–æ–ª–æ–≤)</label>
                    </div>
                    <button id="register-btn" class="btn-primary">
                        <span class="btn-text">–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</span>
                        <div class="btn-loader hidden"></div>
                    </button>
                    <p class="auth-switch">–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <span id="show-login">–í–æ–π—Ç–∏</span></p>
                </div>
            </div>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞ -->
    <div id="app" class="app hidden">
        <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å —á–∞—Ç–∞–º–∏ -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="user-info">
                    <div id="user-avatar" class="user-avatar">üòä</div>
                    <div class="user-details">
                        <span id="user-name" class="user-name">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</span>
                        <span id="user-status" class="user-status">online</span>
                    </div>
                </div>
                <div class="header-actions">
                    <button id="mobile-menu-btn" class="btn-icon mobile-only" title="–ú–µ–Ω—é">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="3" y1="6" x2="21" y2="6"></line>
                            <line x1="3" y1="12" x2="21" y2="12"></line>
                            <line x1="3" y1="18" x2="21" y2="18"></line>
                        </svg>
                    </button>
                    <button id="find-users-btn" class="btn-icon mobile-only" title="–ù–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"></circle>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                        </svg>
                    </button>
                    <button id="settings-btn" class="btn-icon" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="3"></circle>
                            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                        </svg>
                    </button>
                    <button id="logout-btn" class="btn-icon" title="–í—ã–π—Ç–∏">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                            <polyline points="16 17 21 12 16 7"></polyline>
                            <line x1="21" y1="12" x2="9" y2="12"></line>
                        </svg>
                    </button>
                </div>
            </div>
            
            <div class="search-container">
                <div class="search-wrapper">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"></circle>
                        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                    </svg>
                    <input type="text" id="search-input" placeholder="–ü–æ–∏—Å–∫ —á–∞—Ç–æ–≤...">
                    <button id="clear-search" class="btn-clear hidden">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>
            </div>
            
            <div class="chats-section">
                <div class="section-header">
                    <h3>–ß–∞—Ç—ã</h3>
                    <span class="badge" id="chats-count">0</span>
                </div>
                <div class="chats-list" id="chats-list">
                    <div class="no-chats">
                        <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —á–∞—Ç–æ–≤</p>
                        <p class="hint">–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —á–∞—Ç, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –æ–±—â–µ–Ω–∏–µ</p>
                    </div>
                </div>
            </div>
            
            <button id="new-chat-btn" class="btn-new-chat">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="12" y1="5" x2="12" y2="19"></line>
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
                –ù–æ–≤—ã–π —á–∞—Ç
            </button>
        </div>
        
        <!-- –û–±–ª–∞—Å—Ç—å —á–∞—Ç–∞ -->
        <div class="chat-area">
            <div id="no-chat-selected" class="no-chat-selected">
                <div class="no-chat-content">
                    <div class="logo">
                        <span class="logo-icon">üí´</span>
                        Soul
                    </div>
                    <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Soul</h2>
                    <p>–í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Ç –¥–ª—è –Ω–∞—á–∞–ª–∞ –æ–±—â–µ–Ω–∏—è</p>
                    <p class="hint">–ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π, –Ω–∞–∂–∞–≤ –∫–Ω–æ–ø–∫—É "–ù–æ–≤—ã–π —á–∞—Ç"</p>
                    <div class="mobile-actions mobile-only">
                        <button id="mobile-new-chat" class="btn-primary">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="12" y1="5" x2="12" y2="19"></line>
                                <line x1="5" y1="12" x2="19" y2="12"></line>
                            </svg>
                            –ù–æ–≤—ã–π —á–∞—Ç
                        </button>
                        <button id="mobile-find-users" class="btn-secondary">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="11" cy="11" r="8"></circle>
                                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                            </svg>
                            –ù–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                        </button>
                        <button id="mobile-settings" class="btn-secondary">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="3"></circle>
                                <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                            </svg>
                            –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                        </button>
                    </div>
                    <div class="features">
                        <div class="feature">
                            <div class="feature-icon">üöÄ</div>
                            <div class="feature-text">–ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è</div>
                        </div>
                        <div class="feature">
                            <div class="feature-icon">üîí</div>
                            <div class="feature-text">–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ</div>
                        </div>
                        <div class="feature">
                            <div class="feature-icon">üé®</div>
                            <div class="feature-text">–¢–µ–º–Ω–∞—è —Ç–µ–º–∞</div>
                        </div>
                        <div class="feature">
                            <div class="feature-icon">üì±</div>
                            <div class="feature-text">–ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="chat-container" class="chat-container hidden">
                <div class="chat-header">
                    <button id="back-to-chats" class="btn-icon mobile-only" title="–ù–∞–∑–∞–¥ –∫ —á–∞—Ç–∞–º">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="19" y1="12" x2="5" y2="12"></line>
                            <polyline points="12 19 5 12 12 5"></polyline>
                        </svg>
                    </button>
                    <div class="chat-info">
                        <div id="chat-avatar" class="chat-avatar">üòä</div>
                        <div class="chat-details">
                            <h3 id="chat-title">–ù–∞–∑–≤–∞–Ω–∏–µ —á–∞—Ç–∞</h3>
                            <span id="chat-status" class="chat-status">online</span>
                        </div>
                    </div>
                    <div class="chat-actions">
                        <button id="voice-call-btn" class="btn-icon" title="–ì–æ–ª–æ—Å–æ–≤–æ–π –≤—ã–∑–æ–≤">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                            </svg>
                        </button>
                        <button id="video-call-btn" class="btn-icon" title="–í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M23 7l-7 5 7 5V7z"></path>
                                <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                            </svg>
                        </button>
                        <button id="chat-info-btn" class="btn-icon" title="–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —á–∞—Ç–µ">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" y1="16" x2="12" y2="12"></line>
                                <line x1="12" y1="8" x2="12.01" y2="8"></line>
                            </svg>
                        </button>
                    </div>
                </div>
                
                <div class="messages-container" id="messages-container">
                    <div class="messages-scroll" id="messages-scroll">
                        <!-- –°–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                    <div class="scroll-indicator hidden" id="scroll-indicator">
                        <button id="scroll-to-bottom">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"></polyline>
                            </svg>
                            <span class="new-messages-count">3</span>
                        </button>
                    </div>
                </div>
                
                <div class="message-input-container">
                    <div class="typing-indicator" id="typing-indicator">
                        <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞–±–æ—Ä–∞ —Ç–µ–∫—Å—Ç–∞ -->
                    </div>
                    <div class="message-input-wrapper">
                        <div class="input-actions-left">
                            <button id="media-btn" class="btn-media" title="–§–æ—Ç–æ –∏ –≤–∏–¥–µ–æ">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                    <circle cx="8.5" cy="8.5" r="1.5"></circle>
                                    <polyline points="21 15 16 10 5 21"></polyline>
                                </svg>
                            </button>
                            <button id="emoji-btn" class="btn-emoji" title="–≠–º–æ–¥–∑–∏">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <path d="M8 14s1.5 2 4 2 4-2 4-2"></path>
                                    <line x1="9" y1="9" x2="9.01" y2="9"></line>
                                    <line x1="15" y1="9" x2="15.01" y2="9"></line>
                                </svg>
                            </button>
                        </div>
                        <div class="input-wrapper">
                            <textarea id="message-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." rows="1"></textarea>
                            <div class="message-actions">
                                <button id="format-bold" class="btn-format" data-format="bold" title="–ñ–∏—Ä–Ω—ã–π">B</button>
                                <button id="format-italic" class="btn-format" data-format="italic" title="–ö—É—Ä—Å–∏–≤">I</button>
                                <button id="format-code" class="btn-format" data-format="code" title="–ö–æ–¥">{ }</button>
                            </div>
                        </div>
                        <button id="send-btn" class="btn-send" title="–û—Ç–ø—Ä–∞–≤–∏—Ç—å">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="22" y1="2" x2="11" y2="13"></line>
                                <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                            </svg>
                        </button>
                    </div>
                    <div class="message-stats">
                        <span id="char-count">0/1000</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ —Å–ø–∏—Å–∫–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
        <div id="users-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>–ù–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h3>
                    <button id="close-users-modal" class="btn-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="search-wrapper">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"></circle>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                        </svg>
                        <input type="text" id="users-search" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∏–ª–∏ username..." autocomplete="off">
                        <button id="search-users-btn" class="btn-search" title="–ù–∞–π—Ç–∏">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="11" cy="11" r="8"></circle>
                                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                            </svg>
                        </button>
                    </div>
                    
                    <div class="search-filters">
                        <button class="filter-btn active" data-filter="all">–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</button>
                        <button class="filter-btn" data-filter="online">–¢–æ–ª—å–∫–æ –æ–Ω–ª–∞–π–Ω</button>
                        <button class="filter-btn" data-filter="recent">–ù–µ–¥–∞–≤–Ω–∏–µ</button>
                    </div>
                    
                    <div class="users-list" id="users-list">
                        <div class="no-results">
                            <div class="no-results-icon">üë•</div>
                            <p>–î—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ–∫–∞ –Ω–µ—Ç</p>
                            <p class="hint">–ü—Ä–∏–≥–ª–∞—Å–∏—Ç–µ –¥—Ä—É–∑–µ–π, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –æ–±—â–µ–Ω–∏–µ!</p>
                        </div>
                    </div>
                    
                    <div class="search-results-info" id="search-results-info">
                        –í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: 0
                    </div>
                    
                    <div class="modal-actions">
                        <button id="cancel-users-btn" class="btn-secondary">–ó–∞–∫—Ä—ã—Ç—å</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
        <div id="settings-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                    <button id="close-settings-modal" class="btn-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="settings-section">
                        <h4>–í–Ω–µ—à–Ω–∏–π –≤–∏–¥</h4>
                        <div class="setting-item">
                            <p>–¢–µ–º–∞</p>
                            <select id="theme-select">
                                <option value="dark">–¢–µ–º–Ω–∞—è</option>
                                <option value="light">–°–≤–µ—Ç–ª–∞—è</option>
                                <option value="auto">–°–∏—Å—Ç–µ–º–Ω–∞—è</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <p>–†–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞</p>
                            <select id="font-size-select">
                                <option value="small">–ú–∞–ª–µ–Ω—å–∫–∏–π</option>
                                <option value="medium" selected>–°—Ä–µ–¥–Ω–∏–π</option>
                                <option value="large">–ë–æ–ª—å—à–æ–π</option>
                            </select>
                        </div>
                    </div>
                    <div class="settings-section">
                        <h4>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h4>
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="notifications-enabled" checked>
                                –í–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
                            </label>
                        </div>
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="sound-enabled" checked>
                                –ó–≤—É–∫–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
                            </label>
                        </div>
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="message-sound-enabled" checked>
                                –ó–≤—É–∫ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
                            </label>
                        </div>
                    </div>
                    <div class="modal-actions">
                        <button id="save-settings" class="btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                        <button id="cancel-settings" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è -->
        <div id="profile-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</h3>
                    <button id="close-profile-modal" class="btn-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="profile-edit-form">
                        <div class="avatar-selection">
                            <h4>–ê–≤–∞—Ç–∞—Ä–∫–∞</h4>
                            <div class="avatar-options" id="avatar-options">
                                <!-- Emoji –∞–≤–∞—Ç–∞—Ä—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                            </div>
                            <div class="current-avatar">
                                <div id="profile-avatar-preview" class="profile-avatar-preview">üòä</div>
                                <span>–¢–µ–∫—É—â–∞—è –∞–≤–∞—Ç–∞—Ä–∫–∞</span>
                            </div>
                        </div>
                        
                        <div class="input-group">
                            <input type="text" id="profile-name" placeholder=" " required>
                            <label for="profile-name">–ò–º—è</label>
                        </div>
                        
                        <div class="input-group">
                            <input type="text" id="profile-username" placeholder=" " required>
                            <label for="profile-username">Username</label>
                            <div class="input-hint">–¢–æ–ª—å–∫–æ –ª–∞—Ç–∏–Ω—Å–∫–∏–µ –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã –∏ _</div>
                        </div>
                        
                        <div class="input-group">
                            <textarea id="profile-bio" placeholder=" " rows="3"></textarea>
                            <label for="profile-bio">–û —Å–µ–±–µ</label>
                            <div class="input-hint">–ú–∞–∫—Å–∏–º—É–º 150 —Å–∏–º–≤–æ–ª–æ–≤</div>
                        </div>
                        
                        <div class="profile-stats">
                            <div class="stat-item">
                                <span class="stat-number" id="profile-chats-count">0</span>
                                <span class="stat-label">—á–∞—Ç–æ–≤</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number" id="profile-joined-date">-</span>
                                <span class="stat-label">—Å –Ω–∞–º–∏</span>
                            </div>
                        </div>
                    </div>
                    <div class="modal-actions">
                        <button id="save-profile" class="btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                        <button id="cancel-profile" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ —ç–º–æ–¥–∑–∏ -->
        <div id="emoji-modal" class="modal hidden">
            <div class="modal-content emoji-modal-content">
                <div class="modal-header">
                    <h3>–í—ã–±–µ—Ä–∏—Ç–µ —ç–º–æ–¥–∑–∏</h3>
                    <button id="close-emoji-modal" class="btn-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="emoji-categories">
                        <button class="emoji-category-btn active" data-category="smileys">üòä</button>
                        <button class="emoji-category-btn" data-category="animals">üê±</button>
                        <button class="emoji-category-btn" data-category="food">üçï</button>
                        <button class="emoji-category-btn" data-category="travel">üöó</button>
                        <button class="emoji-category-btn" data-category="objects">üí°</button>
                        <button class="emoji-category-btn" data-category="symbols">‚ù§Ô∏è</button>
                    </div>
                    <div class="emoji-grid" id="emoji-grid">
                        <!-- –≠–º–æ–¥–∑–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–≥—Ä—É–∑–∫–∏ –º–µ–¥–∏–∞ -->
        <div id="media-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ –∏–ª–∏ –≤–∏–¥–µ–æ</h3>
                    <button id="close-media-modal" class="btn-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="media-upload-area" id="media-upload-area">
                        <div class="upload-placeholder">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="17 8 12 3 7 8"></polyline>
                                <line x1="12" y1="3" x2="12" y2="15"></line>
                            </svg>
                            <p>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Å—é–¥–∞ —Ñ–æ—Ç–æ –∏–ª–∏ –≤–∏–¥–µ–æ</p>
                            <p class="hint">–∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–æ–≤</p>
                            <p class="hint">–ú–∞–∫—Å. —Ä–∞–∑–º–µ—Ä: 2MB</p>
                        </div>
                        <input type="file" id="media-file-input" multiple accept="image/*,video/*" style="display: none;">
                    </div>
                    <div class="media-preview" id="media-preview">
                        <!-- –ü—Ä–µ–≤—å—é —Ñ–∞–π–ª–æ–≤ –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
                    </div>
                    <div class="upload-progress hidden" id="upload-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-fill"></div>
                        </div>
                        <span class="progress-text" id="progress-text">0%</span>
                    </div>
                    <div class="modal-actions">
                        <button id="upload-media" class="btn-primary" disabled>–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                        <button id="cancel-media" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –º–µ–¥–∏–∞ -->
        <div id="media-viewer-modal" class="modal hidden">
            <div class="modal-content media-viewer-content">
                <button class="media-viewer-close">&times;</button>
                <div class="media-viewer" id="media-viewer">
                    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </div>
        </div>

        <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
        <div id="notifications" class="notifications"></div>

        <!-- –ê—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
        <audio id="notification-sound" preload="auto">
            <source src="sounds/notification.mp3" type="audio/mpeg">
            <source src="sounds/notification.wav" type="audio/wav">
            –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç—ã.
        </audio>
        
        <audio id="message-sound" preload="auto">
            <source src="sounds/notification.mp3" type="audio/mpeg">
            <source src="sounds/notification.mp3" type="audio/wav">
            –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç—ã.
        </audio>
        
        <!-- Fallback –∞—É–¥–∏–æ (–µ—Å–ª–∏ —Ñ–∞–π–ª—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã) -->
        <audio id="fallback-notification-sound" preload="auto">
            <source src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAAAA==" type="audio/wav">
        </audio>
    </div>

    <script src="firebase-config.js"></script>
    <script src="app.js"></script>
</body>
</html>
